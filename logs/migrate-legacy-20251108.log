
> migrate:legacy-inspections
> npx tsx scripts/migrate-legacy-inspections.ts

[dotenv@17.2.2] injecting env (0) from .env.local -- tip: ğŸ” encrypt with Dotenvx: https://dotenvx.com
ğŸ”„ ë ˆê±°ì‹œ ì ê²€ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œì‘...

âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: PrismaClientValidationError: 
Invalid `prisma.inspections.findMany()` invocation in
/Users/kwangsunglee/Projects/AEDpics/scripts/migrate-legacy-inspections.ts:26:56

  23 const sixMonthsAgo = new Date();
  24 sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);
  25 
â†’ 26 const legacyInspections = await prisma.inspections.findMany({
       where: {
         inspection_date: {
           gte: new Date("2025-05-08T06:19:47.281Z")
         }
       },
       select: {
         id: true,
         equipment_serial: true,
         inspector_id: true,
         inspection_date: true,
         completed_at: true,
         created_by: true,
         ~~~~~~~~~~
     ?   aed_data_id?: true,
     ?   inspection_type?: true,
     ?   visual_status?: true,
     ?   battery_status?: true,
     ?   pad_status?: true,
     ?   operation_status?: true,
     ?   overall_status?: true,
     ?   notes?: true,
     ?   issues_found?: true,
     ?   photos?: true,
     ?   inspection_latitude?: true,
     ?   inspection_longitude?: true,
     ?   issues?: true,
     ?   original_data?: true,
     ?   registered_data?: true,
     ?   inspected_data?: true,
     ?   created_at?: true,
     ?   updated_at?: true,
     ?   aed_data?: true,
     ?   user_profiles?: true,
     ?   inspection_field_comparisons?: true,
     ?   _count?: true
       }
     })

Unknown field `created_by` for select statement on model `inspections`. Available options are marked with ?.
    at throwValidationException (/Users/kwangsunglee/Projects/AEDpics/node_modules/@prisma/client/src/runtime/core/errorRendering/throwValidationException.ts:45:9)
    at ei.handleRequestError (/Users/kwangsunglee/Projects/AEDpics/node_modules/@prisma/client/src/runtime/RequestHandler.ts:202:7)
    at ei.handleAndLogRequestError (/Users/kwangsunglee/Projects/AEDpics/node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
    at ei.request (/Users/kwangsunglee/Projects/AEDpics/node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
    at async a (/Users/kwangsunglee/Projects/AEDpics/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
    at async migrateLegacyInspections (/Users/kwangsunglee/Projects/AEDpics/scripts/migrate-legacy-inspections.ts:26:31) {
  clientVersion: '6.18.0'
}
ğŸ’¥ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜: PrismaClientValidationError: 
Invalid `prisma.inspections.findMany()` invocation in
/Users/kwangsunglee/Projects/AEDpics/scripts/migrate-legacy-inspections.ts:26:56

  23 const sixMonthsAgo = new Date();
  24 sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);
  25 
â†’ 26 const legacyInspections = await prisma.inspections.findMany({
       where: {
         inspection_date: {
           gte: new Date("2025-05-08T06:19:47.281Z")
         }
       },
       select: {
         id: true,
         equipment_serial: true,
         inspector_id: true,
         inspection_date: true,
         completed_at: true,
         created_by: true,
         ~~~~~~~~~~
     ?   aed_data_id?: true,
     ?   inspection_type?: true,
     ?   visual_status?: true,
     ?   battery_status?: true,
     ?   pad_status?: true,
     ?   operation_status?: true,
     ?   overall_status?: true,
     ?   notes?: true,
     ?   issues_found?: true,
     ?   photos?: true,
     ?   inspection_latitude?: true,
     ?   inspection_longitude?: true,
     ?   issues?: true,
     ?   original_data?: true,
     ?   registered_data?: true,
     ?   inspected_data?: true,
     ?   created_at?: true,
     ?   updated_at?: true,
     ?   aed_data?: true,
     ?   user_profiles?: true,
     ?   inspection_field_comparisons?: true,
     ?   _count?: true
       }
     })

Unknown field `created_by` for select statement on model `inspections`. Available options are marked with ?.
    at throwValidationException (/Users/kwangsunglee/Projects/AEDpics/node_modules/@prisma/client/src/runtime/core/errorRendering/throwValidationException.ts:45:9)
    at ei.handleRequestError (/Users/kwangsunglee/Projects/AEDpics/node_modules/@prisma/client/src/runtime/RequestHandler.ts:202:7)
    at ei.handleAndLogRequestError (/Users/kwangsunglee/Projects/AEDpics/node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
    at ei.request (/Users/kwangsunglee/Projects/AEDpics/node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
    at async a (/Users/kwangsunglee/Projects/AEDpics/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
    at async migrateLegacyInspections (/Users/kwangsunglee/Projects/AEDpics/scripts/migrate-legacy-inspections.ts:26:31) {
  clientVersion: '6.18.0'
}
