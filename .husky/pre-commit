echo "Running pre-commit checks..."

# TypeScript 체크 (외부 라이브러리 오류는 무시)
echo "1/3 Checking TypeScript..."
npm run tsc || echo "⚠️  TypeScript errors found (continuing with warnings)"

# ESLint 체크
echo "2/3 Checking ESLint..."
npm run lint
LINT_EXIT=$?

if [ $LINT_EXIT -ne 0 ]; then
  echo "❌ ESLint errors found. Please fix before committing."
  exit 1
fi

# 빌드 테스트 (빠른 검증만)
echo "3/3 Testing build..."
NODE_ENV=production npm run build > /dev/null 2>&1
BUILD_EXIT=$?

if [ $BUILD_EXIT -ne 0 ]; then
  echo "❌ Build failed. Please fix before committing."
  exit 1
fi

echo "✅ All pre-commit checks passed!"
