# Stage 3 브라우저 테스트 체크리스트

## 테스트 개요
- **목적**: 3단계에서 수정한 코드가 브라우저에서 정상 작동하는지 검증
- **범위**: installation_location_address 검색, 주소 표시 로직
- **URL**: http://localhost:3000
- **로그인 정보**:
  - 이메일: nemcdg@nmc.or.kr
  - 비밀번호: Dlsxm*0537

---

## 1단계: 로그인 검증 (5분)

### 1.1 로그인 페이지 접속
- [ ] http://localhost:3000 접속
- [ ] 로그인 페이지가 정상 표시됨
- [ ] 이메일 입력란에 nemcdg@nmc.or.kr 입력
- [ ] 비밀번호 입력란에 Dlsxm*0537 입력
- [ ] "로그인" 버튼 클릭

### 1.2 로그인 성공 확인
- [ ] 대시보드 또는 메인 페이지로 리디렉션됨
- [ ] 네비게이션 메뉴가 정상 표시됨
- [ ] 사용자 정보가 정상 표시됨 (nemcdg@nmc.or.kr)
- [ ] 콘솔 에러 없음 (F12 → Console 탭 확인)

---

## 2단계: AED 데이터 조회 검증 (10분)

### 2.1 AED 데이터 페이지 접속
- [ ] 네비게이션 메뉴에서 "AED 데이터" 클릭
- [ ] /aed-data 페이지로 이동됨
- [ ] 데이터 테이블이 정상 표시됨
- [ ] 주소 칼럼이 정상 표시됨

### 2.2 installation_location_address 검색 테스트
**목적**: 3단계-1에서 추가한 installation_location_address 검색이 작동하는지 확인

#### 테스트 케이스 1: installation_location_address만 있는 데이터 검색
- [ ] 검색창에 "동덕로" 입력 (installation_location_address에만 있는 주소)
- [ ] 검색 버튼 클릭 또는 Enter
- [ ] 검색 결과가 표시됨
- [ ] 결과 중 "동덕로"가 포함된 주소 확인
- [ ] 콘솔 에러 없음

#### 테스트 케이스 2: installation_address만 있는 데이터 검색
- [ ] 검색창 초기화
- [ ] 검색창에 "동산동" 입력 (installation_address에만 있는 주소)
- [ ] 검색 결과가 표시됨
- [ ] 결과 중 "동산동"이 포함된 주소 확인

#### 테스트 케이스 3: 일반 기관명 검색
- [ ] 검색창에 "보건소" 입력
- [ ] 검색 결과가 표시됨
- [ ] 주소 칼럼이 정상 표시됨 (빈 값 없음)

### 2.3 주소 표시 확인
- [ ] 테이블의 "주소" 칼럼 확인
- [ ] 모든 행에 주소가 표시됨 (빈 값 없음)
- [ ] "주소 미등록" 기본값이 적절하게 표시됨

---

## 3단계: 준수도 점검 메뉴 검증 (15분)

### 3.1 준수도 점검 페이지 접속
- [ ] 네비게이션 메뉴에서 "준수도 점검" 또는 "Compliance" 클릭
- [ ] /compliance 페이지로 이동됨
- [ ] 페이지가 정상 표시됨
- [ ] 필터 옵션이 정상 표시됨

### 3.2 기본 조회 테스트
- [ ] 시도 선택 (예: 대구광역시)
- [ ] "조회" 버튼 클릭
- [ ] 의무설치기관 목록이 표시됨
- [ ] 각 기관의 주소가 정상 표시됨

### 3.3 확인된 매핑 주소 표시 확인
**목적**: 3단계-4에서 리팩토링한 check/route.ts 검증

- [ ] 확인된 매핑이 있는 기관 확인
- [ ] 매칭된 AED의 주소가 정상 표시됨
- [ ] 주소 형식이 일관됨 (installation_location_address 우선)

### 3.4 새 매칭 추천 확인
- [ ] 미확인 기관의 "매칭 추천" 확인
- [ ] 추천 AED 목록의 주소가 정상 표시됨
- [ ] 주소가 비어있지 않음

---

## 4단계: 관리번호 후보 조회 검증 (10분)

### 4.1 관리번호 후보 페이지 접속
- [ ] 준수도 점검 페이지에서 기관 선택
- [ ] "관리번호 후보" 또는 유사 버튼 클릭
- [ ] 관리번호 후보 목록이 표시됨

### 4.2 자동 추천 결과 확인
**목적**: 3단계-4에서 리팩토링한 management-number-candidates/route.ts 검증

- [ ] 자동 추천 섹션이 표시됨
- [ ] 각 후보의 주소가 정상 표시됨
- [ ] 주소 형식이 일관됨

### 4.3 검색 기능 확인
- [ ] 검색창에 기관명 입력 (예: "병원")
- [ ] 검색 결과가 표시됨
- [ ] 검색 결과의 주소가 정상 표시됨
- [ ] installation_location_address 우선 표시 확인

---

## 5단계: 성능 및 에러 확인 (5분)

### 5.1 콘솔 에러 확인
- [ ] F12 → Console 탭 열기
- [ ] 페이지 탐색 중 에러 메시지 없음
- [ ] Warning 메시지 확인 (있다면 기록)

### 5.2 네트워크 요청 확인
- [ ] F12 → Network 탭 열기
- [ ] API 요청이 정상적으로 완료됨 (200 OK)
- [ ] 응답 시간이 합리적임 (< 2초)
- [ ] 실패한 요청 없음 (4xx, 5xx)

### 5.3 주소 표시 일관성 확인
- [ ] 여러 페이지를 탐색하며 주소 표시 확인
- [ ] 모든 곳에서 동일한 주소 형식 사용됨
- [ ] installation_location_address 우선 표시됨
- [ ] 빈 값 또는 null 표시 없음

---

## 6단계: 추가 테스트 (선택사항, 10분)

### 6.1 필터 조합 테스트
- [ ] 시도 + 구군 조합 선택
- [ ] 검색어 입력
- [ ] 정상 작동 확인

### 6.2 페이지네이션 테스트
- [ ] 다음 페이지 이동
- [ ] 주소 표시 일관성 확인
- [ ] 페이지 전환 시 에러 없음

### 6.3 반응형 테스트 (선택)
- [ ] 브라우저 창 크기 조절
- [ ] 모바일 뷰 확인 (F12 → Device Toolbar)
- [ ] 주소 표시가 잘림 없이 표시됨

---

## 테스트 결과 기록

### 발견된 이슈
```
이슈 1:
- 페이지:
- 증상:
- 재현 방법:

이슈 2:
- 페이지:
- 증상:
- 재현 방법:
```

### 통과한 테스트
```
- 로그인: ✅
- AED 데이터 조회: ✅
- installation_location_address 검색: ✅
- 준수도 점검: ✅
- 관리번호 후보: ✅
- 성능/에러: ✅
```

---

## 테스트 완료 확인

### 최종 체크리스트
- [ ] 모든 페이지에서 주소가 정상 표시됨
- [ ] installation_location_address 검색이 작동함
- [ ] 콘솔 에러가 없음
- [ ] 성능 저하가 없음
- [ ] 사용자 경험이 향상됨 (또는 동일함)

### 결론
- **테스트 통과**: ✅ / ❌
- **발견된 이슈 수**: 0개
- **심각도**: 없음 / 낮음 / 중간 / 높음
- **배포 준비**: ✅ 준비됨 / ❌ 추가 수정 필요

---

## 참고 정보

### 수정된 API 엔드포인트
1. `/api/aed-data` - installation_location_address 검색 추가
2. `/api/public/aed-locations` - installation_location_address 검색 추가
3. `/api/compliance/check-optimized` - getDisplayAddress() 적용
4. `/api/compliance/check` - getDisplayAddress() 적용 (3개 위치)
5. `/api/compliance/management-number-candidates` - getSqlAddressCoalesce() 적용 (7개 위치)

### 주소 우선순위
1. installation_location_address (우선)
2. installation_address (fallback)
3. "주소 미등록" (둘 다 없을 때)

### 유틸리티 함수
- `lib/utils/null-helpers.ts` - addressFallback()
- `lib/utils/aed-address-helpers.ts` - getDisplayAddress(), getSqlAddressCoalesce()

---

**테스트 작성일**: 2025-11-15
**테스트 담당자**:
**소요 시간**: 약 45분 (전체)
