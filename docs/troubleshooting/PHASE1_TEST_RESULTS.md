# Phase 1 테스트 결과 기록

**테스트 시작**: 2025-11-07 [시간]
**테스트 담당자**: _______________
**테스트 환경**: 프로덕션 (https://aed.pics)

---

## Step 1.1: 테스트 환경 준비

### 준비 항목 확인
- [ ] 테스트 이메일 1 (nmc.or.kr): ____________________
- [ ] 테스트 이메일 2 (외부 도메인): ____________________
- [ ] 관리자 계정 로그인 가능: YES / NO
- [ ] 관리자 대시보드 접근 가능: YES / NO
  - URL: https://aed.pics/admin/users

### 예비 조건 확인
- [ ] 대기 중인 사용자 최소 3명 이상 확인 (승인 2명, 거부 1명)
- [ ] NCP 콘솔 로그인 가능: YES / NO
- [ ] PM2 로그 접근 가능: YES / NO

**준비 완료 시간**: ________________
**결과**: PASS / FAIL

---

## Test Case 1: TC-01 Approval - nmc.or.kr 도메인

### 테스트 정보
- **테스트 이메일**: ____________________
- **선택한 사용자 ID**: ____________________
- **선택한 역할**: ____________________
- **테스트 시작 시간**: 2025-11-07 [시:분:초]

### 실행 과정

#### Step 1: 관리자 대시보드 접속
```
URL: https://aed.pics/admin/users
결과: 페이지 로드됨 / 에러 발생
```
- [ ] 사용자 목록 표시됨

#### Step 2: nmc.or.kr 도메인 사용자 선택
- [ ] 대기 중인 사용자 목록에서 발견
- [ ] 이메일 주소 확인: ____________________

#### Step 3: [승인] 버튼 클릭
```
결과: 모달 팝업 / 에러
```
- [ ] 역할 선택 UI 표시됨

#### Step 4: 승인 역할 선택
- [ ] 선택한 역할: ____________________

#### Step 5: [확인] 버튼 클릭
```
시작 시간: 2025-11-07 [시:분:초]
```

### HTTP 응답 확인
```
HTTP 상태 코드: [200 / 400 / 500 / 기타: ___]
응답 메시지: ____________________
에러 코드: ____________________
```

**예상**: HTTP 200
**결과**: PASS / FAIL

### PM2 로그 확인
```bash
# 실행 명령어
pm2 logs aedpics --err --lines 20

# 찾을 메시지
"Approval email sent successfully via NCP Mailer"

# 로그 결과
```

| 항목 | 확인 | 상태 |
|------|------|------|
| "successfully" 메시지 있음 | YES / NO | PASS / FAIL |
| 로그 시간 | ___________ | PASS / FAIL |
| 에러 메시지 없음 | YES / NO | PASS / FAIL |

### 이메일 수신 확인

**수신 대기 시간**: 5분

```
수신 여부: YES / NO
수신 시간: 2025-11-07 [시:분:초] (대기 시간: ___ 분)
이메일 주소: ____________________
```

**NO인 경우 대응**:
- [ ] PM2 로그 다시 확인
- [ ] 2분 추가 대기
- [ ] 스팸 폴더 확인
- [ ] 최종 결과: 수신됨 / 미수신

### 이메일 헤더 확인

```
발신자 (From):
____________________

메일 제목:
[AED 시스템] 회원가입이 승인되었습니다

메일 본문 (첫 2줄):
____________________
____________________
```

**발신자 검증**:
- [ ] 발신자가 `noreply@nmc.or.kr` 정확히 일치: YES / NO
- [ ] 발신자가 `noreply@aed.pics`: YES / NO (이면 FAIL)
- [ ] 기타 발신자: ____________________

**결과**: PASS (noreply@nmc.or.kr) / FAIL (다른 발신자)

### TC-01 최종 결과

| 항목 | 예상 | 실제 | 상태 |
|------|------|------|------|
| HTTP 응답 | 200 | ___ | PASS / FAIL |
| PM2 로그 | "successfully" | 있음/없음 | PASS / FAIL |
| 이메일 수신 | 5분 내 | ___ 분 | PASS / FAIL |
| 발신자 | noreply@nmc.or.kr | ___ | PASS / FAIL |

**전체 결과**: ✅ PASS / ❌ FAIL

**실패 시 원인**:
```
____________________
____________________
```

---

## Test Case 2: TC-02 Approval - 외부 도메인

### 테스트 정보
- **테스트 이메일**: ____________________
- **도메인**: ____________________
- **선택한 사용자 ID**: ____________________
- **테스트 시작 시간**: 2025-11-07 [시:분:초]

### 실행 결과

**HTTP 응답**: [200 / 기타: ___]

**PM2 로그 메시지**:
- [ ] "Approval email sent successfully via NCP Mailer" 있음

**이메일 수신**:
- [ ] 수신됨 (시간: ___)
- [ ] 미수신

**발신자 확인**:
```
From: ____________________

예상: noreply@aed.pics
결과: PASS / FAIL
```

**발신자 검증**:
- [ ] 발신자가 `noreply@aed.pics` 정확히 일치: YES / NO
- [ ] 발신자가 `noreply@nmc.or.kr`: YES / NO (이면 FAIL - TC-01과 달라야 함)
- [ ] 기타: ____________________

### TC-02 최종 결과

| 항목 | 예상 | 실제 | 상태 |
|------|------|------|------|
| HTTP 응답 | 200 | ___ | PASS / FAIL |
| 이메일 수신 | YES | YES/NO | PASS / FAIL |
| 발신자 | noreply@aed.pics | ___ | PASS / FAIL |
| TC-01과 다른 발신자 | YES | YES/NO | PASS / FAIL |

**전체 결과**: ✅ PASS / ❌ FAIL

**중요 검증**: TC-01 발신자 ≠ TC-02 발신자
- TC-01 발신자: noreply@nmc.or.kr
- TC-02 발신자: noreply@aed.pics
- [ ] 다름: YES / NO

---

## Test Case 3: TC-03 Rejection

### 테스트 정보
- **거부 대상 사용자 ID**: ____________________
- **거부 사유 입력**: ____________________
- **테스트 시작 시간**: 2025-11-07 [시:분:초]

### 실행 결과

**HTTP 응답**: [200 / 기타: ___]

**PM2 로그 메시지**:
- [ ] "Rejection email sent successfully via NCP Mailer" 있음

**이메일 수신**:
- [ ] 수신됨 (시간: ___)
- [ ] 미수신 (분 후 확인: ___)

**이메일 확인**:

```
발신자 (From): ____________________

메일 제목: [AED 시스템] 회원가입 검토 결과 안내

메일 본문 (첫 2줄):
____________________
____________________

거부 사유 표시됨: YES / NO
```

**발신자 검증**:
- [ ] 발신자가 noreply@nmc.or.kr 또는 noreply@aed.pics 중 하나: YES / NO
- [ ] 개인 계정 아님: YES / NO

### TC-03 최종 결과

| 항목 | 예상 | 실제 | 상태 |
|------|------|------|------|
| HTTP 응답 | 200 | ___ | PASS / FAIL |
| 이메일 수신 | YES | YES/NO | PASS / FAIL |
| 발신자 정상 | noreply@***.kr | ___ | PASS / FAIL |
| 거부 사유 표시 | YES | YES/NO | PASS / FAIL |

**전체 결과**: ✅ PASS / ❌ FAIL

---

## Phase 1 최종 요약

### 전체 테스트 결과

| TC | 항목 | 상태 |
|----|------|------|
| TC-01 | nmc 도메인 승인 | PASS / FAIL |
| TC-02 | 외부 도메인 승인 | PASS / FAIL |
| TC-03 | 거부 | PASS / FAIL |

### 핵심 검증

**1. 발신자 도메인 분리**
- [ ] TC-01 발신자: noreply@nmc.or.kr
- [ ] TC-02 발신자: noreply@aed.pics
- [ ] TC-03 발신자: 위 두 개 중 하나

**2. 금지된 발신자 없음**
- [ ] fail0788@naver.com 미포함: YES / NO
- [ ] smy0810@nmc.or.kr 미포함: YES / NO
- [ ] song0811@nmc.or.kr 미포함: YES / NO
- [ ] 기타 개인 계정 미포함: YES / NO

**3. 이메일 발송 성공**
- [ ] 3개 모두 수신됨: YES / NO
- [ ] PM2 로그 "successfully" 메시지: YES / NO

### 최종 판정

**전체 Phase 1 결과**: ✅ PASS / ❌ FAIL

**FAIL인 경우 원인 분석**:
```
____________________
____________________
____________________
```

**다음 단계 진행 여부**:
- [ ] YES - Phase 2로 진행 (NCP 콘솔 검증)
- [ ] NO - 문제 해결 후 재테스트

---

## 테스트 완료 서명

**테스트 담당자**: ____________________

**완료 시간**: 2025-11-07 [시:분:초]

**소요 시간**: ___ 분

**비고**:
```
____________________
____________________
```

---

**문서 작성일**: 2025-11-07
**상태**: Phase 1 진행 중
**다음 문서**: [Phase 2 NCP 콘솔 검증](POST_DEPLOYMENT_VERIFICATION.md)
