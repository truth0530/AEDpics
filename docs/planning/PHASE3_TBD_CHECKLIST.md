# Phase 3 협의 결과 반영 - TBD 체크리스트

**목적**: 각 팀 협의 후 확정되어야 할 항목들을 추적하고, 설계 문서 업데이트 일정을 명시

**상태**: 협의 전 (11월 10-11일 협의 후 업데이트 예정)

**마감**: Fri 11-12 09:00 (협의 후 24시간 내 문서 업데이트 완료)

---

## 1. e-gen 팀 협의 (Wed/Thu 14:00-15:00)

**담당자**: Backend 개발자
**협의 날짜**: 11월 10일 또는 11일
**문서 업데이트**: Fri 11-12 09:00까지
**담당 문서**: PHASE3_DESIGN_EDGEN_SYNC.md

### API 명세 확인 (Section A)

- [ ] **A1. 엔드포인트 확정**
  - [ ] 데이터 조회 엔드포인트 (예: `/api/aed/list`, `/api/aed/incremental`)
  - [ ] 메타데이터 엔드포인트 (마지막 업데이트 타임스탐프 등)
  - 현재 설계: [TBD]
  - **협의 결과**: ___________________________
  - 상태: ☐ 확정 ☐ 보류 ☐ 추가검토

- [ ] **A2. 인증 방식 확정**
  - [ ] API 키 기반 또는 OAuth 2.0 여부
  - [ ] 요청 헤더/바디 포맷
  - [ ] 토큰 갱신 정책 (유효기간, 갱신 메커니즘)
  - 현재 설계: [TBD]
  - **협의 결과**: ___________________________
  - 상태: ☐ 확정 ☐ 보류 ☐ 추가검토

- [ ] **A3. 레이트 리미팅 정책**
  - [ ] 시간당 요청 제한 (requests per hour)
  - [ ] 동시 연결 제한
  - [ ] 초과 시 재시도 정책 (Backoff 전략)
  - 현재 설계: Exponential backoff (1s, 2s, 4s, max 3 attempts)
  - **협의 결과**: ___________________________
  - 상태: ☐ 확정 ☐ 보류 ☐ 추가검토

### 동기화 전략 수립 (Section B)

- [ ] **B1. 업데이트 정책 확정**
  - [ ] 데이터 전체 교체 vs 증분 업데이트 지원 여부
  - [ ] 삭제 데이터 처리 (소프트 삭제 vs 하드 삭제 신호)
  - [ ] 변경 이력 추적 가능 여부 (updated_at 또는 change_log)
  - 현재 설계: Incremental with timestamp filtering
  - **협의 결과**: ___________________________
  - 상태: ☐ 확정 ☐ 보류 ☐ 추가검토

- [ ] **B2. 초기 데이터 조회 범위**
  - [ ] 최초 동기화 시 몇 개월/년치 데이터부터 시작할지
  - [ ] 필터링 기준 (지역, 설치 상태, 등록일 범위 등)
  - 현재 설계: [TBD]
  - **협의 결과**: ___________________________
  - 상태: ☐ 확정 ☐ 보류 ☐ 추가검토

- [ ] **B3. 증분 동기화 기준**
  - [ ] updated_at, last_modified_date 등 타임스탐프 필드명
  - [ ] 최소 갱신 간격 (예: 일일 배치, 시간단위 스트림)
  - [ ] 페이징 전략 (limit/offset vs cursor 기반)
  - 현재 설계: Daily batch, 04:00 KST, timestamp-based filtering
  - **협의 결과**: ___________________________
  - 상태: ☐ 확정 ☐ 보류 ☐ 추가검토

### 데이터 품질 검증 (Section C)

- [ ] **C1. 필드 매핑 및 검증**
  - [ ] e-gen 필드명 ↔ AEDpics DB 필드명 정확한 매핑
  - [ ] 데이터 타입 호환성 (예: 숫자 형식, 날짜 형식 ISO 8601)
  - [ ] 필수/선택 필드 구분
  - 현재 설계: Basic mapping in Section 2.2
  - **협의 결과**: ___________________________
  - 상태: ☐ 확정 ☐ 보류 ☐ 추가검토

- [ ] **C2. 예상 오류 케이스 및 처리 방식**
  - [ ] 누락 필드 (null value) 처리
  - [ ] 잘못된 형식 데이터 (예: 비숫자가 들어온 숫자 필드)
  - [ ] 중복 레코드 감지 및 병합 기준
  - 현재 설계: 4-stage validation (Format → Business → DB → Post)
  - **협의 결과**: ___________________________
  - 상태: ☐ 확정 ☐ 보류 ☐ 추가검토

### 액션 아이템 (Section D)

- [ ] **D1. 테스트 API 제공**
  - 필요: e-gen 테스트 엔드포인트 제공 (실제 동기화 전 검증용)
  - 예상 일정: 협의 후 _____ 일 내
  - 담당: e-gen 팀

- [ ] **D2. API 문서 제공**
  - 필요: 완전한 API 문서 (요청/응답 스키마, 에러 코드 정의)
  - 형식: Swagger/OpenAPI, Postman Collection 등
  - 담당: e-gen 팀

- [ ] **D3. 초기 데이터 대량 제공 (필요시)**
  - 필요: 첫 동기화를 위한 대량 데이터 추출 (CSV 또는 데이터베이스 덤프)
  - 예상 규모: 81,464개 AED 전체
  - 담당: e-gen 팀

---

## 2. NCP 팀 협의 (Wed/Thu 15:00-16:00)

**담당자**: Infra/DevOps 개발자
**협의 날짜**: 11월 10일 또는 11일
**문서 업데이트**: Fri 11-12 09:00까지
**담당 문서**: PHASE3_DESIGN_STORAGE_MIGRATION.md

### NCP Object Storage 리소스 생성 (Section 1)

- [ ] **1.1. 버킷 생성 확정**
  - [ ] 버킷명: aedpics-storage
  - [ ] 리전: kr-central-2 (또는 변경 필요시 협의)
  - [ ] 접근 제어: Private (CDN을 통한 공개 접근만)
  - [ ] 버전 관리: Enabled (롤백을 위해 필수)
  - 상태: ☐ 생성 완료 ☐ 생성 대기 ☐ 변경 필요

- [ ] **1.2. CDN 설정 확정**
  - [ ] CORS 설정 (origin 화이트리스트: aed.pics 등)
  - [ ] 캐시 TTL: 86400초 (24시간)
  - [ ] 압축: Gzip/Brotli Enabled
  - [ ] HTTP/2 Push Enabled (선택사항)
  - 상태: ☐ 설정 완료 ☐ 대기 ☐ 변경 필요

- [ ] **1.3. IAM 권한 발급**
  - [ ] Application 계정명 및 인증키 제공
  - [ ] 필요 권한 확정:
    - [ ] GetObject (읽기)
    - [ ] PutObject (쓰기)
    - [ ] DeleteObject (삭제)
    - [ ] ListBucket (목록 조회)
  - [ ] 권한 범위: aedpics-storage 버킷만 (다른 버킷 제외)
  - 상태: ☐ 발급 완료 ☐ 대기 ☐ 변경 필요

### 마이그레이션 기술 검증 (Section 2)

- [ ] **2.1. 마이그레이션 일정 확인**
  - 계획 시작: 2025-11-24 (Mon)
  - 데이터 이전: 11-24 ~ 12-05 (약 2주)
  - 병렬 운영: 12-05 ~ 12-12 (1주)
  - 최종 단절: 12-12 (Fri)
  - 협의 결과 수정 필요: ☐ 예 ☐ 아니오

- [ ] **2.2. 백업 및 복구 전략**
  - [ ] NCP 스냅샷 유지 기간: 90일 (확인)
  - [ ] 롤백 시나리오: 데이터 무결성 확인 후 Supabase로 복귀
  - [ ] 롤백 가능 기간: Phase 2 완료 후 30일 (협의)
  - 상태: ☐ 확정 ☐ 변경 필요

- [ ] **2.3. 성능 및 가용성 검증**
  - [ ] 예상 다운타임: 0분 (무중단 마이그레이션)
  - [ ] 읽기 성능: Supabase와 비교하여 저하 없음 (CDN 캐싱)
  - [ ] 쓰기 성능: <500ms per request 목표
  - 상태: ☐ 확정 ☐ 벤치마크 필요

### 비용 확인 및 SLA 합의 (Section 3)

- [ ] **3.1. 월별 비용 확정**
  - 저장소: $0.02/GB/월 × 160GB = $3.20/월
  - 대역폭: 월 10GB @ $0.05/GB = $0.50/월
  - CDN: 월 10GB @ $0.03/GB = $0.30/월
  - **예상 합계**: $4.00/월 (한화 약 5,200원)
  - 협의 결과: ___________________________
  - 상태: ☐ 확정 ☐ 수정 필요

- [ ] **3.2. 초과 요금 정책 확인**
  - [ ] 초과 대역폭 요금 (GB당 가격)
  - [ ] 요청 횟수 제한 (매월 무료 요청 한도)
  - [ ] 경고 알림 설정 (비용 초과 시)
  - 상태: ☐ 확정 ☐ 미확인

- [ ] **3.3. SLA 합의**
  - [ ] 가용성 목표: 99.9% 이상
  - [ ] 지원 채널 및 응답 시간
  - [ ] 장애 발생 시 고객 통지 방식
  - 상태: ☐ 확정 ☐ 미확인

### 액션 아이템 (Section 4)

- [ ] **4.1. 버킷 및 CDN 사전 생성**
  - 필요: 11월 24일 개발 시작 전 준비 완료
  - 담당: NCP 팀
  - 마감: Fri 11-22

- [ ] **4.2. 테스트 계정 권한 발급**
  - 필요: 개발팀이 NCP 환경에서 테스트 가능하도록
  - 형식: Access Key + Secret Key
  - 담당: NCP 팀
  - 마감: Fri 11-22

- [ ] **4.3. 기술 문서 제공**
  - 필요: NCP Object Storage API 문서, 예제 코드
  - 형식: API 문서, SDK 사용 가이드
  - 담당: NCP 팀

---

## 3. 운영팀 협의 (Thu 10:00-11:00)

**담당자**: Frontend 개발자
**협의 날짜**: 11월 10일 또는 11일
**문서 업데이트**: Fri 11-12 09:00까지
**담당 문서**: PHASE3_DESIGN_STATISTICS_DASHBOARD.md

### Phase 2 최종 확인 (Section 1)

- [ ] **1.1. MODE_TOGGLE_GUIDE PDF 배포 준비**
  - [ ] 문서 내용 최종 승인
  - [ ] 배포 대상: 250개 보건소 담당자
  - [ ] 배포 방식: 이메일 + 온라인 포탈
  - 상태: ☐ 준비 완료 ☐ 수정 필요

- [ ] **1.2. 교육 세션 확정**
  - [ ] 일시: 2025-11-10 14:00
  - [ ] 장소: Zoom
  - [ ] 담당자: Frontend 개발자 + 운영팀
  - [ ] 참석 예상 인원: 약 20-30명 (권역별 대표)
  - 상태: ☐ 확정 ☐ 일정 조정 필요

### Phase 3 대시보드 요구사항 (Section 2)

- [ ] **2.1. 핵심 지표 우선순위**
  - [ ] 점검 완료율 (전국 및 시도별)
  - [ ] 미완료 AED 현황 (위험 목록)
  - [ ] 월별 점검 추이 (추세선)
  - [ ] 담당자별 점검 실적 (순위)
  - **협의 결과**: 추가 지표 필요 여부
    - [ ] 지역별 점검 산포도
    - [ ] 점검 예정 일정 (향후 2주)
    - [ ] 기타: ___________________________
  - 상태: ☐ 확정 ☐ 논의 필요

- [ ] **2.2. 시각화 선호도**
  - [ ] 원형 차트 (점검율, 상태 분포)
  - [ ] 막대 차트 (시도별 비교)
  - [ ] 선형 차트 (월별 추이)
  - [ ] 지도 시각화 (지역별 색칠)
  - [ ] 테이블 (상세 데이터)
  - **협의 결과**: 우선순위
    - 1순위: ___________________________
    - 2순위: ___________________________
    - 3순위: ___________________________
  - 상태: ☐ 확정 ☐ 미정

- [ ] **2.3. 내보내기 기능**
  - [ ] CSV 내보내기 (엑셀로 분석 가능)
  - [ ] PDF 리포트 생성 (보고용 형식)
  - [ ] 이메일 자동 발송 (주간/월간)
  - **협의 결과**: 추가 기능 필요 여부
    - [ ] 데이터 자동 갱신 (몇 시간 간격?)
    - [ ] 필터 저장 (관심 지역만)
    - [ ] 기타: ___________________________
  - 상태: ☐ 확정 ☐ 추후 협의

- [ ] **2.4. 권한별 접근 범위**
  - [ ] Master (전국 전체 데이터)
  - [ ] Regional Admin (해당 시도만)
  - [ ] Local Admin (해당 시군구만)
  - **협의 결과**: 제외 대상 데이터 (민감정보)
    - [ ] 담당자 이름/연락처 노출 여부
    - [ ] 점검자 신원 공개 여부
    - [ ] 기타 고려사항: ___________________________
  - 상태: ☐ 확정 ☐ 보안 검토 필요

### 액션 아이템 (Section 3)

- [ ] **3.1. 요구사항 상세 정의서 제출**
  - 형식: 양식 또는 회의록
  - 마감: Fri 11-12 09:00
  - 담당: 운영팀 리더

- [ ] **3.2. 샘플 데이터 제공 (필요시)**
  - 형식: CSV 또는 JSON
  - 규모: 약 50개 샘플 AED (다양한 지역/상태)
  - 용도: UI 디자인 및 성능 테스트
  - 담당: 개발팀
  - 마감: Mon 11-17

---

## 4. 최종 추적 (Fri 11-11 16:00 통합 검토)

**회의**: Integration Design Review Meeting
**참석자**: e-gen/Storage/Dashboard 담당자 + 운영팀 리더 + CTO
**결과물**: 3개 설계 문서 v1.2 최종 서명

### 확인 항목

- [ ] **모든 [TBD] 항목이 확정되었는가?**
  - e-gen 설계: ☐ 완료 ☐ 보류
  - Storage 설계: ☐ 완료 ☐ 보류
  - Dashboard 설계: ☐ 완료 ☐ 보류

- [ ] **협의 결과를 설계 문서에 반영했는가?**
  - 문서 업데이트 버전: v1.1 (협의 후) → v1.2 (최종)
  - PR 생성 및 리뷰 완료: ☐ 예 ☐ 아니오

- [ ] **다음 단계 액션 아이템이 명확한가?**
  - 담당자: ☐ 지정됨
  - 마감: ☐ 명시됨
  - 전달: ☐ 공유됨

---

## 5. 상태 추적 요약

| 항목 | 담당자 | 협의 일정 | 문서 업데이트 마감 | 상태 |
|------|--------|---------|-------------------|------|
| e-gen 동기화 | Backend | Wed/Thu | Fri 09:00 | ☐ |
| Storage 마이그레이션 | Infra | Wed/Thu | Fri 09:00 | ☐ |
| Dashboard 요구사항 | Frontend | Wed/Thu | Fri 09:00 | ☐ |
| 통합 최종 검토 | Tech Lead | Fri 16:00 | Fri 21:00 | ☐ |

---

**마지막 업데이트**: 2025-11-07
**문서 버전**: 1.0.0
**다음 액션**: 각 팀별 협의 일정 확정 후 체크리스트 항목 작성
