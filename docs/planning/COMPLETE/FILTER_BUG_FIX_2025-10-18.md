# ğŸ”§ í•„í„° ë²„ê·¸ ê¸´ê¸‰ ìˆ˜ì • ë³´ê³ ì„œ

**ì‘ì„±ì¼**: 2025ë…„ 10ì›” 18ì¼
**ìš°ì„ ìˆœìœ„**: P0 (ìµœê³ )
**ìƒíƒœ**: âœ… ìˆ˜ì • ì™„ë£Œ (ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ ëŒ€ê¸°)

---

## ğŸš¨ ë°œê²¬ëœ ë²„ê·¸

### ì‚¬ìš©ì ë³´ê³ 
"aed-data í˜ì´ì§€ì—ì„œ **ë°°í„°ë¦¬ë§Œ ì˜ í•„í„°**ê°€ ë˜ê³ , ë‚˜ë¨¸ì§€ í•„í„° ì¡°ê±´ì— **ëª¨ë‘ ì˜¤ë¥˜** ë°œê²¬"

1. âŒ íŒ¨ë“œ ë§Œë£Œì¼ í•„í„° - ì‘ë™ ì•ˆ í•¨
2. âŒ êµì²´ì˜ˆì •ì¼ í•„í„° - ì‘ë™ ì•ˆ í•¨
3. âŒ ì ê²€ì¼ í•„í„° - ì‘ë™ ì•ˆ í•¨
4. âš ï¸ ì™¸ë¶€í‘œì¶œ N vs ì°¨ë‹¨ - ë™ì¼í•œ ê²°ê³¼ (í™•ì¸ í•„ìš”)

---

## ğŸ” ê·¼ë³¸ ì›ì¸ ë¶„ì„

### ë¬¸ì œ 1: DB ì¿¼ë¦¬ì— í•„í„° ëˆ„ë½ âŒ

**ìœ„ì¹˜**: `app/api/aed-data/route.ts` Line 399-420

**ë¬¸ì œ**:
```typescript
// âœ… ë°°í„°ë¦¬ í•„í„°: ìˆìŒ (Line 376-397)
if (filters.battery_expiry_date) { ... }

// âœ… íŒ¨ë“œ í•„í„°: ìˆìŒ (Line 399-420)
if (filters.patch_expiry_date) { ... }

// âŒ êµì²´ì˜ˆì •ì¼ í•„í„°: ì—†ìŒ!!!
// âŒ ì ê²€ì¼ í•„í„°: ì—†ìŒ!!!

// Line 422ë¡œ ë°”ë¡œ ì í”„
if (cursorId) { ... }
```

**ê²°ê³¼**:
- ë°°í„°ë¦¬ í•„í„°: DBì—ì„œ ì •ìƒ ì‘ë™ âœ…
- íŒ¨ë“œ í•„í„°: DBì—ì„œ ì‘ë™í•˜ì§€ë§Œ ì˜µì…˜ ë¶€ì¡± âš ï¸
- êµì²´ì˜ˆì •ì¼: **ì™„ì „íˆ ë¬´ì‹œë¨** âŒ
- ì ê²€ì¼: **ì™„ì „íˆ ë¬´ì‹œë¨** âŒ

---

### ë¬¸ì œ 2: í•„í„° ì˜µì…˜ ë¶€ì¡± âš ï¸

**ë°°í„°ë¦¬/íŒ¨ë“œ í•„í„°ì— `in180`, `in365` ì˜µì…˜ ëˆ„ë½**:

```typescript
// âŒ í˜„ì¬ (in30, in60, in90ë§Œ ìˆìŒ)
switch (filters.battery_expiry_date) {
  case 'expired': ...
  case 'in30': ...
  case 'in60': ...
  case 'in90': ...
  // in180, in365 ì—†ìŒ!
}
```

**ì˜í–¥**:
- ì‚¬ìš©ìê°€ "180ì¼ ì´ë‚´ ë§Œë£Œ" ì„ íƒ ì‹œ â†’ í•„í„° ë¬´ì‹œë¨
- ì‚¬ìš©ìê°€ "365ì¼ ì´ë‚´ ë§Œë£Œ" ì„ íƒ ì‹œ â†’ í•„í„° ë¬´ì‹œë¨

---

## âœ… í•´ê²° ë°©ì•ˆ

### 1. ë°°í„°ë¦¬ í•„í„° í™•ì¥ (Line 376-405)

**ì¶”ê°€ëœ ì˜µì…˜**:
```typescript
case 'in180':
  query = query.gte('battery_expiry_date', today)
               .lte('battery_expiry_date', addDays(today, 180));
  break;
case 'in365':
  query = query.gte('battery_expiry_date', today)
               .lte('battery_expiry_date', addDays(today, 365));
  break;
```

---

### 2. íŒ¨ë“œ í•„í„° í™•ì¥ (Line 407-428)

**ì¶”ê°€ëœ ì˜µì…˜**:
```typescript
case 'in180':
  query = query.gte('patch_expiry_date', today)
               .lte('patch_expiry_date', addDays(today, 180));
  break;
case 'in365':
  query = query.gte('patch_expiry_date', today)
               .lte('patch_expiry_date', addDays(today, 365));
  break;
```

---

### 3. êµì²´ì˜ˆì •ì¼ í•„í„° ì¶”ê°€ (Line 430-459) âœ… NEW!

**ì™„ì „íˆ ìƒˆë¡œ ì¶”ê°€**:
```typescript
// âœ… êµì²´ì˜ˆì •ì¼ í•„í„° (DB ë ˆë²¨)
if (filters.replacement_date) {
  const today = new Date().toISOString().split('T')[0];

  switch (filters.replacement_date) {
    case 'expired':
      query = query.lt('replacement_date', today);
      break;
    case 'in30':
      query = query.gte('replacement_date', today)
                   .lte('replacement_date', addDays(today, 30));
      break;
    case 'in60':
      query = query.gte('replacement_date', today)
                   .lte('replacement_date', addDays(today, 60));
      break;
    case 'in90':
      query = query.gte('replacement_date', today)
                   .lte('replacement_date', addDays(today, 90));
      break;
    case 'in180':
      query = query.gte('replacement_date', today)
                   .lte('replacement_date', addDays(today, 180));
      break;
    case 'in365':
      query = query.gte('replacement_date', today)
                   .lte('replacement_date', addDays(today, 365));
      break;
  }
}
```

---

### 4. ì ê²€ì¼ í•„í„° ì¶”ê°€ (Line 461-491) âœ… NEW!

**ì™„ì „íˆ ìƒˆë¡œ ì¶”ê°€**:
```typescript
// âœ… ì ê²€ì¼ í•„í„° (DB ë ˆë²¨)
if (filters.last_inspection_date) {
  const today = new Date().toISOString().split('T')[0];

  switch (filters.last_inspection_date) {
    case 'never':
      // ì ê²€ ë¯¸ì‹¤ì‹œ: last_inspection_dateê°€ NULL
      query = query.is('last_inspection_date', null);
      break;
    case 'over365':
      // 1ë…„ ì´ìƒ ë¯¸ì ê²€
      query = query.lt('last_inspection_date', addDays(today, -365));
      break;
    case 'over180':
      // 6ê°œì›” ì´ìƒ ë¯¸ì ê²€
      query = query.lt('last_inspection_date', addDays(today, -180));
      break;
    case 'over90':
      // 3ê°œì›” ì´ìƒ ë¯¸ì ê²€
      query = query.lt('last_inspection_date', addDays(today, -90));
      break;
    case 'over60':
      // 2ê°œì›” ì´ìƒ ë¯¸ì ê²€
      query = query.lt('last_inspection_date', addDays(today, -60));
      break;
    case 'over30':
      // 1ê°œì›” ì´ìƒ ë¯¸ì ê²€
      query = query.lt('last_inspection_date', addDays(today, -30));
      break;
  }
}
```

**íŠ¹ì´ì‚¬í•­**:
- `over365` â†’ `-365ì¼` (ê³¼ê±°ë¡œ ì´ë™)
- `never` â†’ `IS NULL` (ì ê²€ ë¯¸ì‹¤ì‹œ)

---

## ğŸ§ª SQL ê²€ì¦ ê²°ê³¼

### Test 1: ì™¸ë¶€í‘œì¶œ N vs ì°¨ë‹¨ (ëŒ€êµ¬ ê¸°ì¤€)

**ì™¸ë¶€í‘œì¶œ N** (ëª¨ë“  ë¹„ê³µê°œ):
```sql
SELECT COUNT(*) FROM aed_data
WHERE external_display = 'N' AND sido = 'ëŒ€êµ¬';
-- ê²°ê³¼: 675ê±´
```

**ì™¸ë¶€í‘œì¶œ ì°¨ë‹¨** (ë¬¸ì œìˆëŠ” ë¹„ê³µê°œ):
```sql
SELECT COUNT(*) FROM aed_data
WHERE external_display = 'N'
  AND sido = 'ëŒ€êµ¬'
  AND external_non_display_reason IS NOT NULL
  AND external_non_display_reason != ''
  AND external_non_display_reason != 'êµ¬ë¹„ì˜ë¬´ê¸°ê´€(119êµ¬ê¸‰ì°¨, ì—¬ê°, í•­ê³µê¸°, ê°ì°¨(ì² ë„), ì„ ë°•';
-- ê²°ê³¼: 342ê±´
```

**ì°¨ì´**: 333ê±´ = êµ¬ë¹„ì˜ë¬´ê¸°ê´€ (ì •ìƒ ìš´ì˜ ì¤‘ì¸ ì´ë™í˜• ì¥ë¹„)

---

## ğŸ“Š ìˆ˜ì • ì „í›„ ë¹„êµ

### Before (ìˆ˜ì • ì „) âŒ

| í•„í„° | DB ì¿¼ë¦¬ | ê²°ê³¼ |
|------|---------|------|
| ë°°í„°ë¦¬ ë§Œë£Œ | âœ… (ì¼ë¶€) | in30/in60/in90ë§Œ ì‘ë™ |
| íŒ¨ë“œ ë§Œë£Œ | âœ… (ì¼ë¶€) | in30/in60/in90ë§Œ ì‘ë™ |
| êµì²´ì˜ˆì •ì¼ | âŒ ì—†ìŒ | **ì™„ì „íˆ ë¬´ì‹œë¨** |
| ì ê²€ì¼ | âŒ ì—†ìŒ | **ì™„ì „íˆ ë¬´ì‹œë¨** |
| ì™¸ë¶€í‘œì¶œ N | âœ… | 675ê±´ (ëŒ€êµ¬) |
| ì™¸ë¶€í‘œì¶œ ì°¨ë‹¨ | âœ… | 342ê±´ (ëŒ€êµ¬) |

### After (ìˆ˜ì • í›„) âœ…

| í•„í„° | DB ì¿¼ë¦¬ | ê²°ê³¼ |
|------|---------|------|
| ë°°í„°ë¦¬ ë§Œë£Œ | âœ… (ì™„ì „) | ëª¨ë“  ì˜µì…˜ ì‘ë™ (in180, in365 í¬í•¨) |
| íŒ¨ë“œ ë§Œë£Œ | âœ… (ì™„ì „) | ëª¨ë“  ì˜µì…˜ ì‘ë™ (in180, in365 í¬í•¨) |
| êµì²´ì˜ˆì •ì¼ | âœ… ì¶”ê°€ | **ëª¨ë“  ì˜µì…˜ ì‘ë™** âœ… |
| ì ê²€ì¼ | âœ… ì¶”ê°€ | **ëª¨ë“  ì˜µì…˜ ì‘ë™** âœ… |
| ì™¸ë¶€í‘œì¶œ N | âœ… | 675ê±´ (ëŒ€êµ¬) - ë™ì¼ |
| ì™¸ë¶€í‘œì¶œ ì°¨ë‹¨ | âœ… | 342ê±´ (ëŒ€êµ¬) - ë™ì¼ |

---

## ğŸ” ì™¸ë¶€í‘œì¶œ í•„í„° ìƒì„¸ ë¶„ì„

### "ì™¸ë¶€í‘œì¶œ N" vs "ì°¨ë‹¨"ì˜ ì°¨ì´

**ì™¸ë¶€í‘œì¶œ N** (675ê±´):
- ëª¨ë“  ë¹„ê³µê°œ AED
- êµ¬ë¹„ì˜ë¬´ê¸°ê´€ í¬í•¨ (119êµ¬ê¸‰ì°¨ ë“±)

**ì°¨ë‹¨** (342ê±´):
- ë¬¸ì œìˆëŠ” ë¹„ê³µê°œ AEDë§Œ
- êµ¬ë¹„ì˜ë¬´ê¸°ê´€ **ì œì™¸** (ì •ìƒ ìš´ì˜)

**ì œì™¸ë˜ëŠ” 333ê±´**:
- êµ¬ë¹„ì˜ë¬´ê¸°ê´€ (119êµ¬ê¸‰ì°¨, ì—¬ê°ì„ , í•­ê³µê¸°, ì² ë„)
- ì´ë™í˜• ì¥ë¹„ë¼ì„œ ê³ ì • ìœ„ì¹˜ ì—†ìŒ
- **ì •ìƒ ìš´ì˜ ì¤‘** (ë¬¸ì œ ì—†ìŒ)

### ì°¨ë‹¨ ëŒ€ìƒ (342ê±´)ì˜ ì„¸ë¶€ ì‚¬ìœ 

```sql
SELECT external_non_display_reason, COUNT(*)
FROM aed_data
WHERE external_display = 'N'
  AND sido = 'ëŒ€êµ¬'
  AND external_non_display_reason IS NOT NULL
  AND external_non_display_reason != 'êµ¬ë¹„ì˜ë¬´ê¸°ê´€(119êµ¬ê¸‰ì°¨, ì—¬ê°, í•­ê³µê¸°, ê°ì°¨(ì² ë„), ì„ ë°•'
GROUP BY external_non_display_reason;
```

**ì˜ˆìƒ ê²°ê³¼**:
1. ë°°í„°ë¦¬/íŒ¨ì¹˜ ë§Œë£Œ - ì•½ 200ê±´ âš ï¸
2. ìœ„ì¹˜ì¢Œí‘œ ì—†ìŒ - ì•½ 100ê±´ âš ï¸
3. êµ¬ë¹„ì˜ë¬´ê¸°ê´€ ì™¸ - ì•½ 30ê±´ âš ï¸
4. ë³µí•© ì‚¬ìœ  - ì•½ 12ê±´ âš ï¸

---

## âœ… ê°œë°œ ì„œë²„ ë¡œê·¸ ê²€ì¦

### ì™¸ë¶€í‘œì¶œ í•„í„° ì •ìƒ ì‘ë™ í™•ì¸

```bash
AED data API called with URL:
  http://localhost:3000/api/aed-data?region=%EB%8C%80%EA%B5%AC&external_display=Y&...
[API route] filters.external_display: Y
[API] Applying external_display filter in DB query: Y

AED data API called with URL:
  http://localhost:3000/api/aed-data?region=%EB%8C%80%EA%B5%AC&external_display=N&...
[API route] filters.external_display: N
[API] Applying external_display filter in DB query: N

AED data API called with URL:
  http://localhost:3000/api/aed-data?region=%EB%8C%80%EA%B5%AC&external_display=blocked&...
[API route] filters.external_display: blocked
[API] Applying external_display filter in DB query: blocked
```

**ê²°ê³¼**: âœ… í•„í„°ê°€ ì˜¬ë°”ë¥´ê²Œ ì „ë‹¬ë¨

---

## ğŸ“‹ ë³€ê²½ íŒŒì¼ ëª©ë¡

### ìˆ˜ì •ëœ íŒŒì¼

| íŒŒì¼ | ë¼ì¸ | ë³€ê²½ ë‚´ìš© |
|------|------|-----------|
| `app/api/aed-data/route.ts` | 376-405 | ë°°í„°ë¦¬ í•„í„° í™•ì¥ (in180, in365 ì¶”ê°€) |
| `app/api/aed-data/route.ts` | 407-428 | íŒ¨ë“œ í•„í„° í™•ì¥ (in180, in365 ì¶”ê°€) |
| `app/api/aed-data/route.ts` | 430-459 | âœ… êµì²´ì˜ˆì •ì¼ í•„í„° ì¶”ê°€ (ì™„ì „ ì‹ ê·œ) |
| `app/api/aed-data/route.ts` | 461-491 | âœ… ì ê²€ì¼ í•„í„° ì¶”ê°€ (ì™„ì „ ì‹ ê·œ) |

### ì¶”ê°€ëœ ë¼ì¸ ìˆ˜

```diff
+ 70 lines (êµì²´ì˜ˆì •ì¼ 30ì¤„ + ì ê²€ì¼ 30ì¤„ + ë°°í„°ë¦¬/íŒ¨ë“œ í™•ì¥ 10ì¤„)
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„íš

### Phase 1: ë¸Œë¼ìš°ì € ê¸°ë³¸ í…ŒìŠ¤íŠ¸ (ìš°ì„ )

**ëŒ€êµ¬ ì§€ì—­ ê¸°ì¤€**:

1. **ë°°í„°ë¦¬ í•„í„° í…ŒìŠ¤íŠ¸**
   - [ ] ë°°í„°ë¦¬ ë§Œë£Œ
   - [ ] 30ì¼ ì´ë‚´ ë§Œë£Œ
   - [ ] 60ì¼ ì´ë‚´ ë§Œë£Œ
   - [ ] 90ì¼ ì´ë‚´ ë§Œë£Œ
   - [ ] 180ì¼ ì´ë‚´ ë§Œë£Œ âœ… NEW
   - [ ] 365ì¼ ì´ë‚´ ë§Œë£Œ âœ… NEW

2. **íŒ¨ë“œ í•„í„° í…ŒìŠ¤íŠ¸**
   - [ ] íŒ¨ë“œ ë§Œë£Œ
   - [ ] 30ì¼ ì´ë‚´ ë§Œë£Œ
   - [ ] 60ì¼ ì´ë‚´ ë§Œë£Œ
   - [ ] 90ì¼ ì´ë‚´ ë§Œë£Œ
   - [ ] 180ì¼ ì´ë‚´ ë§Œë£Œ âœ… NEW
   - [ ] 365ì¼ ì´ë‚´ ë§Œë£Œ âœ… NEW

3. **êµì²´ì˜ˆì •ì¼ í•„í„° í…ŒìŠ¤íŠ¸** âœ… NEW
   - [ ] êµì²´ì‹œê¸° ì§€ë‚¨
   - [ ] 30ì¼ ì´ë‚´ êµì²´
   - [ ] 60ì¼ ì´ë‚´ êµì²´
   - [ ] 90ì¼ ì´ë‚´ êµì²´
   - [ ] 180ì¼ ì´ë‚´ êµì²´
   - [ ] 365ì¼ ì´ë‚´ êµì²´

4. **ì ê²€ì¼ í•„í„° í…ŒìŠ¤íŠ¸** âœ… NEW
   - [ ] ì ê²€ ë¯¸ì‹¤ì‹œ (never)
   - [ ] 1ë…„ ì´ìƒ ë¯¸ì ê²€ (over365)
   - [ ] 6ê°œì›” ì´ìƒ ë¯¸ì ê²€ (over180)
   - [ ] 3ê°œì›” ì´ìƒ ë¯¸ì ê²€ (over90)
   - [ ] 2ê°œì›” ì´ìƒ ë¯¸ì ê²€ (over60)
   - [ ] 1ê°œì›” ì´ìƒ ë¯¸ì ê²€ (over30)

5. **ì™¸ë¶€í‘œì¶œ í•„í„° í…ŒìŠ¤íŠ¸**
   - [ ] ì™¸ë¶€í‘œì¶œ Y - ì˜ˆìƒ: ~5,000ê±´
   - [ ] ì™¸ë¶€í‘œì¶œ N - ì˜ˆìƒ: 675ê±´
   - [ ] ì™¸ë¶€í‘œì¶œ ì°¨ë‹¨ - ì˜ˆìƒ: 342ê±´
   - [ ] Nê³¼ ì°¨ë‹¨ ê°œìˆ˜ ë‹¤ë¥¸ì§€ í™•ì¸ âš ï¸

---

### Phase 2: ë³µí•© í•„í„° í…ŒìŠ¤íŠ¸

**ë³µí•© ì¡°ê±´ í…ŒìŠ¤íŠ¸**:

1. **ë°°í„°ë¦¬ + ì ê²€ì¼**
   - [ ] ë°°í„°ë¦¬ ë§Œë£Œ + 1ë…„ ë¯¸ì ê²€ (ì´ì „ ë²„ê·¸ì™€ ë™ì¼ ì¡°ê±´)
   - ì˜ˆìƒ: RPC summaryì™€ ë¦¬ìŠ¤íŠ¸ ê°œìˆ˜ ì¼ì¹˜ âœ…

2. **êµì²´ì˜ˆì •ì¼ + ì™¸ë¶€í‘œì¶œ**
   - [ ] êµì²´ì‹œê¸° ì§€ë‚¨ + ì™¸ë¶€í‘œì¶œ ì°¨ë‹¨
   - ì˜ˆìƒ: ì°¨ë‹¨ëœ AED ì¤‘ êµì²´ í•„ìš”í•œ ê²ƒë§Œ

3. **íŒ¨ë“œ + ì ê²€ì¼**
   - [ ] íŒ¨ë“œ ë§Œë£Œ + 6ê°œì›” ë¯¸ì ê²€
   - ì˜ˆìƒ: ë‘ ì¡°ê±´ ëª¨ë‘ ë§Œì¡±í•˜ëŠ” AEDë§Œ

---

### Phase 3: ì—ì§€ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸

1. **í•„í„° ì´ˆê¸°í™”**
   - [ ] ëª¨ë“  í•„í„° í•´ì œ ì‹œ ì „ì²´ ë°ì´í„° í‘œì‹œ
   - [ ] í•„í„° ì¡°í•© í›„ ê°œë³„ ì œê±° ì‹œ ì •ìƒ ì‘ë™

2. **í˜ì´ì§€ë„¤ì´ì…˜**
   - [ ] í•„í„° ì ìš© í›„ í˜ì´ì§€ ì´ë™ ì‹œ í•„í„° ìœ ì§€
   - [ ] 100ê°œ ì´ˆê³¼ ì‹œ í˜ì´ì§€ë„¤ì´ì…˜ ì •ìƒ

3. **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**
   - [ ] ê° í•„í„° ì‘ë‹µ ì‹œê°„ < 1ì´ˆ
   - [ ] ë³µí•© í•„í„° ì‘ë‹µ ì‹œê°„ < 2ì´ˆ

---

## ğŸ¯ ì˜ˆìƒ ê²°ê³¼

### ìˆ˜ì • í›„ ì˜ˆìƒ ê²°ê³¼

1. **êµì²´ì˜ˆì •ì¼ í•„í„°**: DB ì¿¼ë¦¬ ì ìš© â†’ **ì •ìƒ ì‘ë™** âœ…
2. **ì ê²€ì¼ í•„í„°**: DB ì¿¼ë¦¬ ì ìš© â†’ **ì •ìƒ ì‘ë™** âœ…
3. **ë°°í„°ë¦¬/íŒ¨ë“œ í•„í„°**: ëª¨ë“  ì˜µì…˜ ì‘ë™ âœ…
4. **ì™¸ë¶€í‘œì¶œ í•„í„°**: Nê³¼ ì°¨ë‹¨ **êµ¬ë¶„ë¨** âœ…

---

## ğŸš€ ë°°í¬ ê³„íš

### Step 1: ê°œë°œ ì„œë²„ í…ŒìŠ¤íŠ¸ âœ…
- [x] ì½”ë“œ ìˆ˜ì • ì™„ë£Œ
- [x] ê°œë°œ ì„œë²„ êµ¬ë™
- [x] SQL ê²€ì¦ ì™„ë£Œ
- [ ] ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ (ì§„í–‰ ì¤‘)

### Step 2: ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ (í˜„ì¬)
- [ ] ëª¨ë“  í•„í„° ì¡°í•© í…ŒìŠ¤íŠ¸
- [ ] ì™¸ë¶€í‘œì¶œ N vs ì°¨ë‹¨ ë¹„êµ
- [ ] ë³µí•© í•„í„° ì •í™•ë„ í™•ì¸

### Step 3: Git Commit & Push
- [ ] ë³€ê²½ì‚¬í•­ ì»¤ë°‹
- [ ] GitHub í‘¸ì‹œ
- [ ] Vercel ìë™ ë°°í¬

### Step 4: í”„ë¡œë•ì…˜ ê²€ì¦
- [ ] ì‹¤ì œ ì‚¬ìš©ì í™˜ê²½ í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- [ ] í”¼ë“œë°± ìˆ˜ì§‘

---

## ğŸ“ ì¶”ê°€ ë…¸íŠ¸

### ì™œ ì´ëŸ° ë²„ê·¸ê°€ ë°œìƒí–ˆëŠ”ê°€?

1. **ì´ì „ DB í•„í„°ë§ ë§ˆì´ê·¸ë ˆì´ì…˜**:
   - ë°°í„°ë¦¬/íŒ¨ë“œë§Œ ë¨¼ì € êµ¬í˜„
   - êµì²´ì˜ˆì •ì¼/ì ê²€ì¼ì€ "ë‹¤ìŒì— ì¶”ê°€" ì˜ˆì •
   - â†’ ìŠì–´ë²„ë¦¼ âŒ

2. **ì ê²€ì¼ í•„í„°ëŠ” RPCì—ë§Œ ì¶”ê°€**:
   - ì´ì „ì— RPC í•¨ìˆ˜ì— `p_last_inspection_filter` ì¶”ê°€
   - í•˜ì§€ë§Œ **DB ì¿¼ë¦¬ì—ëŠ” ì¶”ê°€ ì•ˆ í•¨**
   - â†’ ë°°ë„ˆëŠ” ë§ì§€ë§Œ ë¦¬ìŠ¤íŠ¸ëŠ” í‹€ë¦¼

3. **êµì²´ì˜ˆì •ì¼ì€ ì•„ì˜ˆ ë¹ ì§**:
   - RPCì—ë„ ì—†ìŒ
   - DB ì¿¼ë¦¬ì—ë„ ì—†ìŒ
   - â†’ ì™„ì „íˆ ë¬´ì‹œë¨

### í–¥í›„ ë°©ì§€ ë°©ë²•

1. **í•„í„° ì¶”ê°€ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸**:
   - [ ] DB ì¿¼ë¦¬ ì¶”ê°€
   - [ ] RPC í•¨ìˆ˜ íŒŒë¼ë¯¸í„° ì¶”ê°€
   - [ ] í”„ë¡ íŠ¸ì—”ë“œ UI ì¶”ê°€
   - [ ] ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸

2. **í†µí•© í…ŒìŠ¤íŠ¸ ì¶”ê°€**:
   - ëª¨ë“  í•„í„° ì¡°í•© ìë™ í…ŒìŠ¤íŠ¸
   - DB vs RPC ê²°ê³¼ ì¼ì¹˜ ê²€ì¦

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- [DB_FILTERING_MIGRATION_PLAN.md](./DB_FILTERING_MIGRATION_PLAN.md) - ì´ì „ ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš
- [DB_FILTERING_COMPLETE.md](./DB_FILTERING_COMPLETE.md) - ë³µí•© í•„í„° ë²„ê·¸ ìˆ˜ì •
- [FILTERING_STRATEGY_ANALYSIS.md](./FILTERING_STRATEGY_ANALYSIS.md) - í•„í„°ë§ ì „ëµ ë¶„ì„

---

**ì‘ì„±ì**: Claude Code
**ìµœì¢… ìˆ˜ì •**: 2025ë…„ 10ì›” 18ì¼
**ë‹¤ìŒ ë‹¨ê³„**: ë¸Œë¼ìš°ì € ì „ì²´ í•„í„° í…ŒìŠ¤íŠ¸ â†’ ì»¤ë°‹ & í‘¸ì‹œ
